import{r as o,j as a,a as t,H as I,F as z,f as c}from"./app.3915f664.js";import{d as M,F as B}from"./Front.b71ba048.js";import{_ as r}from"./Translate.dc83ae5b.js";import{S as h}from"./SecondaryButton.1822c416.js";import{a as L}from"./index.esm.7ed09047.js";import{S as j}from"./Spinner.96e927c3.js";import R from"./VideosLoop.729c5795.js";import{M as T}from"./Modal.eab9d03c.js";import $ from"./SingleVideo.e59e8f37.js";import{T as D}from"./TextInput.1279f06a.js";import{I as O}from"./index.esm.d3003f7e.js";import"./index.esm.4dd692e2.js";import"./iconBase.581190ba.js";import"./index.esm.1ebb3f74.js";import"./index.esm.7b4e3ded.js";import"./transition.d0efdae9.js";import"./react-toastify.esm.f871cad9.js";import"./index.esm.c83f593c.js";import"./react-tooltip.esm.min.7e156490.js";/* empty css                      */import"./AuthenticatedLayout.10240dd9.js";import"./PrimaryButton.4515b3b5.js";function me({videos:s,category:p,categories:v,exploreImage:k}){const[l,d]=o.exports.useState("Most Viewed"),[u,y]=o.exports.useState(""),[N,n]=o.exports.useState(!1),[x,U]=o.exports.useState(!1),[S,C]=o.exports.useState(!1);M(e=>{console.log(`debounced term updated to: ${e.target.value}`),e.target.value.length>2?(n(!0),c.Inertia.reload({data:{keyword:e.target.value,sortBy:l},only:["videos"],onFinish:()=>n(!1)})):c.Inertia.reload({data:{sortBy:l,keyword:""},only:["videos"],onFinish:()=>n(!1)})},500);const m=o.exports.useRef(),[f,w]=o.exports.useState([]),F=e=>{e.preventDefault(),c.Inertia.visit(route("videos.browse",{search:u,sort:l,selectedCategories:f}),{only:["videos"],preserveState:!0,onBefore:()=>n(!0),onFinish:()=>n(!1)}),b()},V=e=>{const{value:i,checked:P}=e.target;w(P?g=>[...g,i]:g=>g.filter(H=>H!==i))},_=e=>{e.preventDefault();const i="fixed inset-0 z-[9999] pt-5 px-2 overflow-scroll h-screen bg-white dark:bg-black  block w-2/3 flex-shrink-0 mr-5";m.current.className=i},b=e=>{e==null||e.preventDefault();const i="hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5";console.log(`hiding filters ${i}`),m.current.className=i};return a(B,{containerClass:"w-full",extraHeader:!0,extraHeaderTitle:r("Browse Videos"),extraHeaderImage:k,extraHeaderText:"",extraImageHeight:"h-14",children:[t(I,{title:`${p!==null?r(":categoryName Videos",{categoryName:p.category}):r("Browse Videos")}`}),t(T,{show:S,onClose:e=>C(!1),children:x&&t($,{video:x,inModal:!0})}),a("div",{className:"flex w-full -mt-16",children:[t("form",{onSubmit:F,children:a("div",{ref:m,className:"hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5",children:[t("h3",{className:"text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 dark:text-white shadow rounded-t-lg",children:r("Search")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:t(D,{className:"w-full",name:"search",value:u,handleChange:e=>y(e.target.value),placeholder:r("Search Video")})}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 dark:text-white shadow rounded-t-lg",children:r("Sort By")}),a("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:[a("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",value:"Most Viewed",checked:l==="Most Viewed",className:"mr-2",onChange:e=>d(e.target.value)}),r("Most Viewed")]}),a("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",value:"Recently Uploaded",checked:l==="Recently Uploaded",className:"mr-2",onChange:e=>d(e.target.value)}),r("Recently Uploaded")]}),a("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",checked:l==="Older",value:"Older",className:"mr-2",onChange:e=>d(e.target.value)}),r("Older Videos")]}),a("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",checked:l==="Highest Price",value:"Highest Price",className:"mr-2",onChange:e=>d(e.target.value)}),r("Highest Price")]}),a("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",checked:l==="Lowest Price",value:"Lowest Price",className:"mr-2",onChange:e=>d(e.target.value)}),r("Lowest Price")]})]}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:r("Category")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:v.map(e=>a("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"checkbox",name:"categories[]",className:"mr-2",value:e.id,onChange:V,checked:f.includes(e.id.toString())}),e.category]},`catFilter-${e.id}`))}),N?t("div",{className:"my-3",children:t(j,{})}):t("button",{className:"mt-5 bg-indigo-500 dark:bg-zinc-800 font-semibold text-white rounded-lg px-2 py-1.5 block w-full",children:r("Apply Filters")}),t("div",{className:"lg:hidden text-center border-t border-t-gray-300 dark:border-gray-900 py-5",children:t(h,{className:"",onClick:e=>b(e),children:r("Close")})})]})}),a("div",{className:"flex-grow",children:[a("button",{onClick:e=>_(e),className:"mb-7 px-3 -mt-1 py-1.5 bg-indigo-500 text-white rounded-lg lg:hidden flex items-center justify-end",children:[t(O,{className:"mr-1"}),r("Show Filters")]}),s.total===0&&a("div",{className:"text-xl bg-white rounded-lg shadow text-gray-600 dark:bg-zinc-900 dark:text-white font-light p-3 flex items-center",children:[t(L,{className:"w-12 h-12 mr-2"}),r("No videos to show")]}),t(R,{videos:s.data}),s.last_page>1&&a(z,{children:[t("div",{className:"flex text-gray-600 mt-10 mb-5 text-sm",children:r("Page: :pageNumber of :lastPage",{pageNumber:s.current_page,lastPage:s.last_page})}),t(h,{processing:!s.prev_page_url,className:"mr-3",onClick:e=>c.Inertia.visit(s.prev_page_url),children:r("Previous")}),t(h,{processing:!s.next_page_url,onClick:e=>c.Inertia.visit(s.next_page_url),children:r("Next")})]})]})]})]})}export{me as default};
